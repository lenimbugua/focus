<script type="text/javascript">
    function spitTable(url){
        
        const resolveChart = new Promise((resolve, reject) => {
            // do something asynchronous which eventually calls either:

            getData(url);
            resolve(chartsDraw()); // fulfilled
            // or
            reject(console.log(error)); // rejected
        });
         
        /*var chartData = [];
        function getData (){ 
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'http://127.0.0.1:8000/api/employees/', true);

            xhr.onload = function(){
                if(this.status == 200){
                    var employees = JSON.parse(this.responseText);
                    console.log(employees);

                    //check if response has data and toggle between displays accordingly
                    var noData = document.getElementById("noData");
                    var hasData = document.getElementById("hasData");
                    if(employees.results.length < 1 || employees.results.length == undefined){                        
                        
                        noData.style.display = "block";
                        
                        hasData.style.display = "none";
                       
                    }
                    else{
                        noData.style.display = "none";
                        
                        hasData.style.display = "block";
                    }

                    for(let value of employees.results){
                        // update and destroy urls
                        let update='<a href="#" type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#updateModal">';
                        let destroy='<a href="#" type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#deleteModal">';

                        //closing tag
                        let closeTag='</a>';
                        
                        chartData.push([
                            value.first_name,
                            value.last_name, 
                            value.email, 
                            value.phone,
                            value.department,
                            value.employee_ID,
                            update+"<i class='material-icons'>edit</i>edit"+closeTag,
                            destroy+"<i class='material-icons  '>close</i>delete"+closeTag
                        // parseFloat(value.cost)
                        ]);
                        
                    }
                }
            }

            xhr.send();      
                
                
        }   */

        function chartsDraw(){
            google.charts.load('current', {'packages':['table']});
            google.charts.setOnLoadCallback(drawTable);

            function drawTable() {
                var data = new google.visualization.DataTable();
                data.addColumn('string', 'First Name');
                data.addColumn('string', 'Last Name');
                
                data.addColumn('string', 'Email');
                data.addColumn('string', 'Phone');
                data.addColumn('string', 'Department');
                data.addColumn('string', 'Employee ID');
                data.addColumn('string', 'Edit');
                data.addColumn('string', 'Delete');
                
                data.addRows(chartData);

                var table = new google.visualization.Table(document.getElementById('table_div'));

                table.draw(data, {showRowNumber: true, width: '100%', height: '100%',allowHtml:true});
            }
        
        }
    }
    

    /* document.getElementById('button').addEventListener('click', loadUsers);

    function loadUsers(){   
      var xhr = new XMLHttpRequest();
      xhr.open('GET', 'users.php', true);

      xhr.onload = function(){
        if(this.status == 200){
          var users = JSON.parse(this.responseText);
          
          var output = '';
          
          for(var i in users){
            output += '<ul>' +
              '<li>ID: '+users[i].id+'</li>' +
              '<li>Name: '+users[i].name+'</li>' +
              '</ul>';
          }

          document.getElementById('users').innerHTML = output;
        }
      }

      xhr.send();
    }*/

</script>
      
      